# ==============================
# 基础设置
# ==============================
mixed-port: 7890
bind-address: 0.0.0.0
allow-lan: true
mode: rule
log-level: error
external-controller: 0.0.0.0:9090
ipv6: true

# ==============================
# DNS 配置
# ==============================
dns:
  enable: true
  ipv6: true
  listen: 0.0.0.0:53  # DNS 监听地址和端口
  enhanced-mode: fake-ip  # 启用 Fake-IP 模式，提高性能
  fake-ip-range: 198.18.0.1/16  # Fake-IP 地址范围
  default-nameserver:  # 默认 DNS，用于解析 Fake-IP
    - 114.114.114.114 # 骨干网 DNS
  nameserver:  # 主 DNS 服务器列表
    - 223.6.6.6  # 阿里公共 DNS
    - 119.29.29.29 # DNSPod DNS
    - 8.8.8.8  # Google DNS
    - 1.1.1.1  # Cloudflare DNS
  fallback:  # 备用 DNS 服务器（用于防污染）
    - tls://dns.google  # DoT 加密 DNS

# ==============================
# 代理服务器 190.93.246.68
# ==============================
proxies:
  - {name: Alpha, type: vless, server: 162.159.39.146, port: 443, uuid: 351e3c90-7f9f-4f40-bccc-bee0bb0ca951, network: ws, tls: true, udp: false, sni: helloworld.fotoman.com, client-fingerprint: chrome, skip-cert-verify: false, ws-opts: {path: "/", headers: {Host: helloworld.fotoman.com}}}
  - {name: Delta, type: vless, server: 108.162.198.5, port: 443, uuid: e02a245e-5548-4bfc-888a-f4eb0bbb6b25, network: ws, tls: true, udp: false, sni: helloworld.techtrendparts.com, client-fingerprint: chrome, skip-cert-verify: false, ws-opts: {path: "/", headers: {Host: helloworld.techtrendparts.com}}}
  - {name: Gamma, type: vless, server: 172.64.52.199, port: 443, uuid: 5f2616c7-a69c-4a56-94b0-2aa4a25f878f, network: ws, tls: true, udp: false, sni: helloworld.todsm.com, client-fingerprint: chrome, skip-cert-verify: false, ws-opts: {path: "/", headers: {Host: helloworld.todsm.com}}}
  - {name: Beta, type: vless, server: 162.159.44.147, port: 443, uuid: 351e3c90-7f9f-4f40-bccc-bee0bb0ca951, network: ws, tls: true, udp: false, sni: helloworld.fotoman.com, client-fingerprint: chrome, skip-cert-verify: false, ws-opts: {path: "/", headers: {Host: helloworld.fotoman.com}}}
  - {name: Theta, type: vless, server: 172.64.53.47, port: 443, uuid: 5f2616c7-a69c-4a56-94b0-2aa4a25f878f, network: ws, tls: true, udp: false, sni: helloworld.todsm.com, client-fingerprint: chrome, skip-cert-verify: false, ws-opts: {path: "/", headers: {Host: helloworld.todsm.com}}}

# ai专用通道
  - name: "Trojan-TCP-AI"
    type: trojan
    server: 45.76.220.255
    port: 44926
    password: zConwdwyDR          # 对应链接中的密码部分
    udp: true
    sni: ai.todsm.com             # 对应链接中的 sni
    skip-cert-verify: false
    network: tcp
    client-fingerprint: chrome    # 对应 fp=chrome
    alpn:
      - h2
      - http/1.1
      
  - name: "VLESS-REALITY-XAI"
    type: vless
    server: xai.todsm.com
    port: 19996
    uuid: 833a7999-f857-4196-bb07-7005a7390a74
    udp: true
    tls: true
    network: tcp
    flow: xtls-rprx-vision             # 对应链接中的 flow=xtls-rprx-vision
    servername: xai.todsm.com          # 对应链接中的 sni
    reality-opts:
      public-key: 3ln_aNfomy1b6dgwxu_AvNji78rq5x9CaQJ5iTdT8TE  # 对应 pbk
      short-id: 6ba85179e30d4fc2                               # 对应 sid
    client-fingerprint: chrome         # 对应 fp=chrome

  - name: "VLESS-REALITY-AGI"
    type: vless
    server: agi.todsm.com
    port: 24785
    uuid: 7f375cd3-6f1c-4668-af87-9eb4d0d33f57
    udp: true
    tls: true
    network: tcp
    flow: xtls-rprx-vision
    servername: agi.todsm.com
    reality-opts:
      public-key: GsrvA5SAG6BSeGmpX4K-itGJNJHMYH3vTBSHZuKwHUU
      short-id: 6ba85179e30d4fc2
    client-fingerprint: chrome
    
# ==============================
# 代理组
# ==============================
proxy-groups:
  - name: CDN
    type: url-test # load-balance # url-test
    proxies:
      - Alpha
      - Delta
      - Gamma
      - Beta
      - Theta
    url: https://www.google.com/generate_204
    interval: 300
    tolerance: 50
    icon: https://img.icons8.com/?size=100&id=S4NxkowMF95E&format=png&color=000000

  - name: TCP
    type: url-test
    proxies:
      - Trojan-TCP-AI
      - VLESS-REALITY-XAI
      - VLESS-REALITY-AGI
    url: https://www.gstatic.com/generate_204
    interval: 300
    tolerance: 50
    lazy: true
    icon: https://img.icons8.com/?size=100&id=FWpoGgZY6IsM&format=png&color=000000

rules:
# ==============================
# AI / LLM Services
# ==============================
- DOMAIN-KEYWORD,gemini,TCP
- DOMAIN-KEYWORD,perplexity,TCP
- DOMAIN-KEYWORD,chatgpt,TCP
- DOMAIN-KEYWORD,openai,TCP
- DOMAIN-KEYWORD,grok,TCP
- DOMAIN-SUFFIX,x.ai,TCP
# ==============================
# SaaS / Social
# ==============================
- DOMAIN-SUFFIX,linkedin.com,TCP
- DOMAIN-SUFFIX,licdn.com,TCP
# ==============================
# DIRECT
# ==============================
- DOMAIN-KEYWORD,weixin,DIRECT
- DOMAIN-KEYWORD,wechat,DIRECT
- DOMAIN-KEYWORD,qq,DIRECT
- DOMAIN-KEYWORD,tmall,DIRECT
- DOMAIN-KEYWORD,taobao,DIRECT
- DOMAIN-SUFFIX,jd.com,DIRECT
- DOMAIN-KEYWORD,douyin,DIRECT
- DOMAIN-KEYWORD,xiaohongshu,DIRECT
- DOMAIN-KEYWORD,komoot,DIRECT
- DOMAIN-KEYWORD,garmin,DIRECT
- DOMAIN-KEYWORD,wahoo,DIRECT
- DOMAIN-KEYWORD,maskfog,DIRECT
- DOMAIN-KEYWORD,163,DIRECT
# ==============================
# Fallback
# ==============================
- MATCH,CDN
